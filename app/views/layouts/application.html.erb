<!DOCTYPE html>
<html>
<head>
  <title>MicDrop</title>

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">

 <style type="text/css">
      html, body { height: 100%; width: 100%; margin: 0; padding: 0; }
      #container {height: 100%;}
      .matroshka {height: 100%;}
      #map { height: 100%; width: 100% }
    </style>
  <!-- Compiled and minified JavaScript -->

  <%= stylesheet_link_tag    'application', media: 'all' %>

  <%= csrf_meta_tags %>
</head>
<body>

<div id="container">
<%= yield %>
</div>
<script>
var map;
function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
  center: {lat: -34.397, lng: 150.644},
  zoom: 8
  });
  var infoWindow = new google.maps.InfoWindow({map: map});
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      infoWindow.setPosition(pos);
      infoWindow.setContent('Location found.');
      map.setCenter(pos);
    }, function() {
      handleLocationError(true, infoWindow, map.getCenter());
    });
  } else {
    // Browser doesn't support Geolocation
    handleLocationError(false, infoWindow, map.getCenter());
  }
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
  infoWindow.setPosition(pos);
  infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support geolocation.');
}
</script>
<%= javascript_include_tag 'application' %>
<script>renderApp();</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
   <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOLSonxDN7SukH3VRbe_5gO_W6r-Cy8Ts&callback=initMap">
    </script>
</body>
</html>
